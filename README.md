# Azure credentials

This vagrant box can be used to easily authenticate against Microsoft Azure. It is is developed under Unix, however usage on Windows-based systems is theoretically possible. However, the following manual will be for unix only.

## Azure-CLI

For an easy setup, the installation of the [Azure CLI](https://github.com/Azure/azure-xplat-cli) is highly recommended. Get it!

There are various ways to install. Check the [installation guide](https://github.com/Azure/azure-xplat-cli#installation). Easiest ways are

    # With npm
    npm install -g azure-cli

    # On OSX with Homebrew Caskroom
    brew cask install azure-cli

## Connecting the CLI to your subscription

The fastest way for an easy login is using autogenerated management certificates in two steps:

This command opens a browser. Eventually you'll need to log in your Azure account. Then a `<subscription-name>-<date>-credentials.publish-settings` is downloaded. Keep it private! It provides anyone access to your Azure account.

    azure account download

Then the file is imported into Azure CLI

    azure account import path/to/browser-download-dir/<subscription-name>-<date>-credentials.publish-settings

You can now view your subscription or switch if you have several

    azure account list
    azure account set <subscriptionNameOrId>

## Authenticating this Box using the Azure CLI

1. Select the subscrption you want to use with `azure account set`.
2. Run `azure account cert export` in this box
3. An new file `XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX.pem` has been created
4. Insert `XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX` as `subscription_id` in the Vagrantfile

Now that you're in the Vagrantfile you may also edit `vm_location` to be somewhere near you.


